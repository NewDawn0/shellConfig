{ pkgs }:
let
  logos = {
    # Colors
    # $1 => green
    # $2 => yellow
    # $3 => red
    # $4 => purple
    # $5 => blue
    # $6 => white
    ibm = ''
      $3â–€â–€â–€â–€â–€â–€â–€ $1â–€â–€â–€â–€â–€â–€â–€â–€â–€â–˜  $5â–€â–€â–€â–€â–€â–€    â–€â–€â–€â–€â–€â–€
      $3â–€â–€â–€â–€â–€â–€â–€ $1â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€ $5â–€â–€â–€â–€â–€â–€â–˜  â–â–€â–€â–€â–€â–€â–€
      $3  â–€â–€â–€   $1  â–€â–€â–€   â–€â–€â–€ $5  â–€â–€â–€â–€â–€  â–€â–€â–€â–€â–€
      $3  â–€â–€â–€   $1  â–€â–€â–€â–€â–€â–€â–€â–€  $5  â–€â–€â–€â–â–€â–˜â–â–€â–˜â–€â–€â–€
      $3  â–€â–€â–€   $1  â–€â–€â–€â–€â–€â–€â–€â–€  $5  â–€â–€â–€ â–€â–€â–€â–€ â–€â–€â–€
      $3  â–€â–€â–€   $1  â–€â–€â–€   â–€â–€â–€ $5  â–€â–€â–€ â–â–€â–€â–˜ â–€â–€â–€
      $3â–€â–€â–€â–€â–€â–€â–€ $1â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€ $5â–€â–€â–€â–€â–€  â–€â–€  â–€â–€â–€â–€â–€
      $3â–€â–€â–€â–€â–€â–€â–€ $1â–€â–€â–€â–€â–€â–€â–€â–€â–€â–˜  $5â–€â–€â–€â–€â–€  â–â–˜  â–€â–€â–€â–€â–€
      $6            â–„â–„â–„ â–„   â–„     â–„   â–„â–„       â–„
      $6             â–ˆ  â–ˆâ–„  â–„  â–„  â–ˆ â–„ â–ˆ â–ˆ â–„   â–„â–ˆ
      $6             â–ˆ  â–ˆ â–ˆ â–ˆ â–ˆ â–ˆ â–ˆâ–„â–€ â–ˆâ–€  â–„â–ˆ â–ˆ â–ˆ
      $6             â–ˆ  â–ˆ â–ˆ â–ˆ â–ˆ â–ˆ â–ˆ â–ˆ â–ˆ  â–€â–„â–ˆ â–€â–„â–ˆ
    '';
    ibm-arch = ''
          $5                   â–„
                            â–Ÿâ–ˆâ–™
                           â–Ÿâ–ˆâ–ˆâ–ˆâ–™
                          â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™
                         â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™
                        â–‚â–”â–€â–œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™
                       â–Ÿâ–ˆâ–ˆâ–…â–‚â–â–œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™
                      â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™
                     â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™
                    â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™
                   â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™
                  â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–›â–€â–€â–œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™
                 â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–›      â–œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™
                â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™
               â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–†â–…â–„â–ƒâ–‚
              â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–›        â–œâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™
             â–Ÿâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€â–€              â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–™
            â–Ÿâ–ˆâ–ˆâ–ˆâ–€â–˜                       â–â–€â–ˆâ–ˆâ–ˆâ–™
           â–Ÿâ–›â–€                               â–€â–œâ–™
                  $3 ğŸ¬­ğŸ¬­ $6
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ   $3ğŸ¬‰â–ˆâ–ˆğŸ¬„$6      â–ˆâ–ˆ    â–ˆâ–ˆâ–ˆğŸ¬ºğŸ¬±          â–ˆâ–ˆ
        â–ˆâ–ˆ   â–ˆâ–ˆğŸ¬â–„ğŸ¬ â–„â–„ â–„â–„ğŸ¬â–„ğŸ¬ â–ˆâ–ˆ â–„â–„ â–ˆâ–ˆ â–ˆâ–ˆ ğŸ¬â–„â–„â–„ğŸ¬ ğŸ¬â–„ğŸ¬â–ˆâ–ˆ
        â–ˆâ–ˆ   â–ˆâ–ˆğŸ¬†â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆğŸ¬†â–ˆâ–ˆ â–ˆâ–ˆğŸ¬â–ˆğŸ¬• â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆğŸ¬‚â–ˆâ–ˆ â–ˆâ–ˆğŸ¬Šâ–ˆâ–ˆ
        â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆâ–â–ˆğŸ¬€ â–ˆâ–ˆğŸ¬­â–ˆâ–ˆ â–€â–€ğŸ¬â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ
        â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆâ–ˆğŸ¬´  â–ˆâ–ˆğŸ¬ğŸ¬†ğŸ¬€ ğŸ¬µğŸ¬»ğŸ¬â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ
        â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆâ–â–ˆğŸ¬ â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ
        â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆğŸ¬â–ˆğŸ¬² â–ˆâ–ˆ    â–ˆâ–ˆğŸ¬µâ–ˆâ–ˆ â–ˆâ–ˆğŸ¬µâ–ˆâ–ˆ
        â–€â–€   â–€â–€ â–€â–€ â–€â–€ â–€â–€ â–€â–€ â–€â–€ â–€â–€ â–€â–€    ğŸ¬â–€ğŸ¬€â–€â–€ ğŸ¬â–€ğŸ¬€â–€â–€
    '';
    ibm-large = ''
      $3â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€ $1â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–˜  $5â–€â–€â–€â–€â–€â–€â–€â–€    â–€â–€â–€â–€â–€â–€â–€â–€
      $3â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€ $1â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–˜ $5â–€â–€â–€â–€â–€â–€â–€â–€    â–€â–€â–€â–€â–€â–€â–€â–€
      $3   â–€â–€â–€â–€   $1   â–€â–€â–€â–€   â–€â–€â–€â–€ $5   â–€â–€â–€â–€â–€â–˜  â–â–€â–€â–€â–€â–€
      $3   â–€â–€â–€â–€   $1   â–€â–€â–€â–€   â–€â–€â–€â–€ $5   â–€â–€â–€â–€â–€â–˜  â–â–€â–€â–€â–€â–€
      $3   â–€â–€â–€â–€   $1   â–€â–€â–€â–€   â–€â–€â–€â–€ $5   â–€â–€â–€â–€â–€â–€  â–€â–€â–€â–€â–€â–€
      $3   â–€â–€â–€â–€   $1   â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€  $5   â–€â–€â–€â–€â–â–€  â–€â–˜â–€â–€â–€â–€
      $3   â–€â–€â–€â–€   $1   â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€  $5   â–€â–€â–€â–€â–â–€â–˜â–â–€â–˜â–€â–€â–€â–€
      $3   â–€â–€â–€â–€   $1   â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€  $5   â–€â–€â–€â–€ â–€â–€â–€â–€ â–€â–€â–€â–€
      $3   â–€â–€â–€â–€   $1   â–€â–€â–€â–€   â–€â–€â–€â–€ $5   â–€â–€â–€â–€ â–€â–€â–€â–€ â–€â–€â–€â–€
      $3   â–€â–€â–€â–€   $1   â–€â–€â–€â–€   â–€â–€â–€â–€ $5   â–€â–€â–€â–€ â–â–€â–€â–˜ â–€â–€â–€â–€
      $3   â–€â–€â–€â–€   $1   â–€â–€â–€â–€   â–€â–€â–€â–€ $5   â–€â–€â–€â–€ â–â–€â–€â–˜ â–€â–€â–€â–€
      $3â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€ $1â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–˜ $5â–€â–€â–€â–€â–€â–€â–€  â–€â–€  â–€â–€â–€â–€â–€â–€â–€
      $3â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€ $1â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–˜  $5â–€â–€â–€â–€â–€â–€â–€  â–â–˜  â–€â–€â–€â–€â–€â–€â–€
                  $3 ğŸ¬­ğŸ¬­ $6
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ   $3ğŸ¬‰â–ˆâ–ˆğŸ¬„$6      â–ˆâ–ˆ    â–ˆâ–ˆâ–ˆğŸ¬ºğŸ¬±          â–ˆâ–ˆ
        â–ˆâ–ˆ   â–ˆâ–ˆğŸ¬â–„ğŸ¬ â–„â–„ â–„â–„ğŸ¬â–„ğŸ¬ â–ˆâ–ˆ â–„â–„ â–ˆâ–ˆ â–ˆâ–ˆ ğŸ¬â–„â–„â–„ğŸ¬ ğŸ¬â–„ğŸ¬â–ˆâ–ˆ
        â–ˆâ–ˆ   â–ˆâ–ˆğŸ¬†â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆğŸ¬†â–ˆâ–ˆ â–ˆâ–ˆğŸ¬â–ˆğŸ¬• â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆğŸ¬‚â–ˆâ–ˆ â–ˆâ–ˆğŸ¬Šâ–ˆâ–ˆ
        â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆâ–â–ˆğŸ¬€ â–ˆâ–ˆğŸ¬­â–ˆâ–ˆ â–€â–€ğŸ¬â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ
        â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–Œ  â–ˆâ–ˆğŸ¬ğŸ¬†ğŸ¬€ ğŸ¬µğŸ¬»ğŸ¬â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ
        â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–Œ  â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ
        â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆâ–â–ˆğŸ¬ â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ
        â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆğŸ¬â–ˆğŸ¬² â–ˆâ–ˆ    â–ˆâ–ˆğŸ¬µâ–ˆâ–ˆ â–ˆâ–ˆğŸ¬µâ–ˆâ–ˆ
        â–€â–€   â–€â–€ â–€â–€ â–€â–€ â–€â–€ â–€â–€ â–€â–€ â–€â–€ â–€â–€    ğŸ¬â–€ğŸ¬€â–€â–€ ğŸ¬â–€ğŸ¬€â–€â–€
    '';
    megamind = ''
      $5.-----------------------------.
      | ---      NO SERVER?    ---  |
      '-----------------------------'
      â ¸â¡¸â œâ •â •â â¢â¢‡â¢â¢½â¢ºâ£ªâ¡³â¡â£â£â¢¯â¢â¡¿â£Ÿâ£·â£³â¢¯â¡·â£½â¢½â¢¯â£³â£«â ‡
      â €â €â¢€â¢€â¢„â¢¬â¢ªâ¡ªâ¡â£†â¡ˆâ šâ œâ •â ‡â —â â¢•â¢¯â¢«â£â£¯â£¿â£»â¡½â£â¢—â£—â â €
      â €â ªâ¡ªâ¡ªâ£ªâ¢ªâ¢ºâ¢¸â¢¢â¢“â¢†â¢¤â¢€â €â €â €â €â ˆâ¢Šâ¢â¡¾â£¿â¡¯â£â¢®â ·â â €â €
      â €â €â €â ˆâ Šâ †â¡ƒâ •â¢•â¢‡â¢‡â¢‡â¢‡â¢‡â¢â¢â¢â¢†â¢„â €â¢‘â£½â£¿â¢â ²â ‰â €â €â €â €
      â €â €â €â €â €â¡¿â ‚â  â €â¡‡â¢‡â •â¢ˆâ£€â €â â ¡â £â¡£â¡«â£‚â£¿â ¯â¢ªâ °â ‚â €â €â €â €
      â €â €â €â €â¡¦â¡™â¡‚â¢€â¢¤â¢£â £â¡ˆâ£¾â¡ƒâ  â „â €â¡„â¢±â£Œâ£¶â¢â¢Šâ ‚â €â €â €â €â €â €
      â €â €â €â €â¢â¡²â£œâ¡®â¡â¢â¢Œâ¢‚â ™â ¢â â¢€â¢˜â¢µâ£½â£¿â¡¿â â â €â €â €â €â €â €â €
      â €â €â €â €â ¨â£ºâ¡ºâ¡•â¡•â¡±â¡‘â¡†â¡•â¡…â¡•â¡œâ¡¼â¢½â¡»â â €â €â €â €â €â €â €â €â €â €
      â €â €â €â €â£¼â£³â£«â£¾â£µâ£—â¡µâ¡±â¡¡â¢£â¢‘â¢•â¢œâ¢•â¡â €â €â €â €â €â €â €â €â €â €â €
      â €â €â €â£´â£¿â£¾â£¿â£¿â£¿â¡¿â¡½â¡‘â¢Œâ ªâ¡¢â¡£â££â¡Ÿâ €â €â €â €â €â €â €â €â €â €â €â €
      â €â €â €â¡Ÿâ¡¾â£¿â¢¿â¢¿â¢µâ£½â£¾â£¼â£˜â¢¸â¢¸â£â¡Ÿâ €â €â €â €â €â €â €â €â €â €â €â €â €
      â €â €â €â €â â ‡â ¡â ©â¡«â¢¿â£â¡»â¡®â£’â¢½â ‹â €â €â €â €â €â €â €â €â €â €â €â €â €â €
    '';
  };
  # Set theme to null if you want the default theme
  logoFile = { theme }: pkgs.writeText "logo.txt" theme;
  fastFetchWrapper = { theme }:
    pkgs.writeShellApplication {
      name = "ndfastfetch";
      text = ''
        exec ${pkgs.fastfetch}/bin/fastfetch -l ${
          logoFile { inherit theme; }
        } "$@"
      '';
    };
  fastFetchFinal = { aliases, theme }:
    pkgs.stdenvNoCC.mkDerivation {
      name = "ndfastfetch";
      src = null;
      dontUnpack = true;
      dontConfigure = true;
      dontBuild = true;
      installPhase = ''
        install -Dm644 ${
          logoFile { inherit theme; }
        } $out/share/ndfastfetch/logo.txt
        install -Dm755 ${
          fastFetchWrapper { inherit theme; }
        }/bin/ndfastfetch $out/bin/ndfastfetch
        ${builtins.concatStringsSep "\n"
        (map (e: "ln -s $out/bin/ndfastfetch $out/bin/${e}") aliases)}
      '';
    };
  # Optional arguments:
  #  - theme   = "Your multiline string logo";
  #  - aliases = [ "fastfetch" ];
in pkgs.lib.makeOverridable fastFetchFinal {
  aliases = [ "fastfetch" ];
  theme = logos.ibm-large;
}

{ pkgs }:
let
  logos = {
    # Colors
    # $1 => green
    # $2 => yellow
    # $3 => red
    # $4 => purple
    # $5 => blue
    # $6 => white
    ibm = ''
      $3▀▀▀▀▀▀▀ $1▀▀▀▀▀▀▀▀▀▘  $5▀▀▀▀▀▀    ▀▀▀▀▀▀
      $3▀▀▀▀▀▀▀ $1▀▀▀▀▀▀▀▀▀▀▀ $5▀▀▀▀▀▀▘  ▝▀▀▀▀▀▀
      $3  ▀▀▀   $1  ▀▀▀   ▀▀▀ $5  ▀▀▀▀▀  ▀▀▀▀▀
      $3  ▀▀▀   $1  ▀▀▀▀▀▀▀▀  $5  ▀▀▀▝▀▘▝▀▘▀▀▀
      $3  ▀▀▀   $1  ▀▀▀▀▀▀▀▀  $5  ▀▀▀ ▀▀▀▀ ▀▀▀
      $3  ▀▀▀   $1  ▀▀▀   ▀▀▀ $5  ▀▀▀ ▝▀▀▘ ▀▀▀
      $3▀▀▀▀▀▀▀ $1▀▀▀▀▀▀▀▀▀▀▀ $5▀▀▀▀▀  ▀▀  ▀▀▀▀▀
      $3▀▀▀▀▀▀▀ $1▀▀▀▀▀▀▀▀▀▘  $5▀▀▀▀▀  ▝▘  ▀▀▀▀▀
      $6            ▄▄▄ ▄   ▄     ▄   ▄▄       ▄
      $6             █  █▄  ▄  ▄  █ ▄ █ █ ▄   ▄█
      $6             █  █ █ █ █ █ █▄▀ █▀  ▄█ █ █
      $6             █  █ █ █ █ █ █ █ █  ▀▄█ ▀▄█
    '';
    ibm-arch = ''
          $5                   ▄
                            ▟█▙
                           ▟███▙
                          ▟█████▙
                         ▟███████▙
                        ▂▔▀▜██████▙
                       ▟██▅▂▝▜█████▙
                      ▟█████████████▙
                     ▟███████████████▙
                    ▟█████████████████▙
                   ▟███████████████████▙
                  ▟█████████▛▀▀▜████████▙
                 ▟████████▛      ▜███████▙
                ▟█████████        ████████▙
               ▟██████████        █████▆▅▄▃▂
              ▟██████████▛        ▜█████████▙
             ▟██████▀▀▀              ▀▀██████▙
            ▟███▀▘                       ▝▀███▙
           ▟▛▀                               ▀▜▙
                  $3 🬭🬭 $6
      ██████ ██   $3🬉██🬄$6      ██    ███🬺🬱          ██
        ██   ██🬞▄🬏 ▄▄ ▄▄🬞▄🬏 ██ ▄▄ ██ ██ 🬞▄▄▄🬏 🬞▄🬏██
        ██   ██🬆██ ██ ██🬆██ ██🬞█🬕 ██ ██ ██🬂██ ██🬊██
        ██   ██ ██ ██ ██ ██ ██▐█🬀 ██🬭██ ▀▀🬞██ ██ ██
        ██   ██ ██ ██ ██ ██ ███🬴  ██🬎🬆🬀 🬵🬻🬝██ ██ ██
        ██   ██ ██ ██ ██ ██ ██▐█🬏 ██    ██ ██ ██ ██
        ██   ██ ██ ██ ██ ██ ██🬁█🬲 ██    ██🬵██ ██🬵██
        ▀▀   ▀▀ ▀▀ ▀▀ ▀▀ ▀▀ ▀▀ ▀▀ ▀▀    🬁▀🬀▀▀ 🬁▀🬀▀▀
    '';
    ibm-large = ''
      $3▀▀▀▀▀▀▀▀▀▀ $1▀▀▀▀▀▀▀▀▀▀▀▘  $5▀▀▀▀▀▀▀▀    ▀▀▀▀▀▀▀▀
      $3▀▀▀▀▀▀▀▀▀▀ $1▀▀▀▀▀▀▀▀▀▀▀▀▘ $5▀▀▀▀▀▀▀▀    ▀▀▀▀▀▀▀▀
      $3   ▀▀▀▀   $1   ▀▀▀▀   ▀▀▀▀ $5   ▀▀▀▀▀▘  ▝▀▀▀▀▀
      $3   ▀▀▀▀   $1   ▀▀▀▀   ▀▀▀▀ $5   ▀▀▀▀▀▘  ▝▀▀▀▀▀
      $3   ▀▀▀▀   $1   ▀▀▀▀   ▀▀▀▀ $5   ▀▀▀▀▀▀  ▀▀▀▀▀▀
      $3   ▀▀▀▀   $1   ▀▀▀▀▀▀▀▀▀▀  $5   ▀▀▀▀▝▀  ▀▘▀▀▀▀
      $3   ▀▀▀▀   $1   ▀▀▀▀▀▀▀▀▀▀  $5   ▀▀▀▀▝▀▘▝▀▘▀▀▀▀
      $3   ▀▀▀▀   $1   ▀▀▀▀▀▀▀▀▀▀  $5   ▀▀▀▀ ▀▀▀▀ ▀▀▀▀
      $3   ▀▀▀▀   $1   ▀▀▀▀   ▀▀▀▀ $5   ▀▀▀▀ ▀▀▀▀ ▀▀▀▀
      $3   ▀▀▀▀   $1   ▀▀▀▀   ▀▀▀▀ $5   ▀▀▀▀ ▝▀▀▘ ▀▀▀▀
      $3   ▀▀▀▀   $1   ▀▀▀▀   ▀▀▀▀ $5   ▀▀▀▀ ▝▀▀▘ ▀▀▀▀
      $3▀▀▀▀▀▀▀▀▀▀ $1▀▀▀▀▀▀▀▀▀▀▀▀▘ $5▀▀▀▀▀▀▀  ▀▀  ▀▀▀▀▀▀▀
      $3▀▀▀▀▀▀▀▀▀▀ $1▀▀▀▀▀▀▀▀▀▀▀▘  $5▀▀▀▀▀▀▀  ▝▘  ▀▀▀▀▀▀▀
                  $3 🬭🬭 $6
      ██████ ██   $3🬉██🬄$6      ██    ███🬺🬱          ██
        ██   ██🬞▄🬏 ▄▄ ▄▄🬞▄🬏 ██ ▄▄ ██ ██ 🬞▄▄▄🬏 🬞▄🬏██
        ██   ██🬆██ ██ ██🬆██ ██🬞█🬕 ██ ██ ██🬂██ ██🬊██
        ██   ██ ██ ██ ██ ██ ██▐█🬀 ██🬭██ ▀▀🬞██ ██ ██
        ██   ██ ██ ██ ██ ██ ███▌  ██🬎🬆🬀 🬵🬻🬝██ ██ ██
        ██   ██ ██ ██ ██ ██ ███▌  ██    ██ ██ ██ ██
        ██   ██ ██ ██ ██ ██ ██▐█🬏 ██    ██ ██ ██ ██
        ██   ██ ██ ██ ██ ██ ██🬁█🬲 ██    ██🬵██ ██🬵██
        ▀▀   ▀▀ ▀▀ ▀▀ ▀▀ ▀▀ ▀▀ ▀▀ ▀▀    🬁▀🬀▀▀ 🬁▀🬀▀▀
    '';
    megamind = ''
      $5.-----------------------------.
      | ---      NO SERVER?    ---  |
      '-----------------------------'
      ⠸⡸⠜⠕⠕⠁⢁⢇⢏⢽⢺⣪⡳⡝⣎⣏⢯⢞⡿⣟⣷⣳⢯⡷⣽⢽⢯⣳⣫⠇
      ⠀⠀⢀⢀⢄⢬⢪⡪⡎⣆⡈⠚⠜⠕⠇⠗⠝⢕⢯⢫⣞⣯⣿⣻⡽⣏⢗⣗⠏⠀
      ⠀⠪⡪⡪⣪⢪⢺⢸⢢⢓⢆⢤⢀⠀⠀⠀⠀⠈⢊⢞⡾⣿⡯⣏⢮⠷⠁⠀⠀
      ⠀⠀⠀⠈⠊⠆⡃⠕⢕⢇⢇⢇⢇⢇⢏⢎⢎⢆⢄⠀⢑⣽⣿⢝⠲⠉⠀⠀⠀⠀
      ⠀⠀⠀⠀⠀⡿⠂⠠⠀⡇⢇⠕⢈⣀⠀⠁⠡⠣⡣⡫⣂⣿⠯⢪⠰⠂⠀⠀⠀⠀
      ⠀⠀⠀⠀⡦⡙⡂⢀⢤⢣⠣⡈⣾⡃⠠⠄⠀⡄⢱⣌⣶⢏⢊⠂⠀⠀⠀⠀⠀⠀
      ⠀⠀⠀⠀⢝⡲⣜⡮⡏⢎⢌⢂⠙⠢⠐⢀⢘⢵⣽⣿⡿⠁⠁⠀⠀⠀⠀⠀⠀⠀
      ⠀⠀⠀⠀⠨⣺⡺⡕⡕⡱⡑⡆⡕⡅⡕⡜⡼⢽⡻⠏⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
      ⠀⠀⠀⠀⣼⣳⣫⣾⣵⣗⡵⡱⡡⢣⢑⢕⢜⢕⡝⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
      ⠀⠀⠀⣴⣿⣾⣿⣿⣿⡿⡽⡑⢌⠪⡢⡣⣣⡟⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
      ⠀⠀⠀⡟⡾⣿⢿⢿⢵⣽⣾⣼⣘⢸⢸⣞⡟⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
      ⠀⠀⠀⠀⠁⠇⠡⠩⡫⢿⣝⡻⡮⣒⢽⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
    '';
  };
  # Set theme to null if you want the default theme
  logoFile = { theme }: pkgs.writeText "logo.txt" theme;
  fastFetchWrapper = { theme }:
    pkgs.writeShellApplication {
      name = "ndfastfetch";
      text = ''
        exec ${pkgs.fastfetch}/bin/fastfetch -l ${
          logoFile { inherit theme; }
        } "$@"
      '';
    };
  fastFetchFinal = { aliases, theme }:
    pkgs.stdenvNoCC.mkDerivation {
      name = "ndfastfetch";
      src = null;
      dontUnpack = true;
      dontConfigure = true;
      dontBuild = true;
      installPhase = ''
        install -Dm644 ${
          logoFile { inherit theme; }
        } $out/share/ndfastfetch/logo.txt
        install -Dm755 ${
          fastFetchWrapper { inherit theme; }
        }/bin/ndfastfetch $out/bin/ndfastfetch
        ${builtins.concatStringsSep "\n"
        (map (e: "ln -s $out/bin/ndfastfetch $out/bin/${e}") aliases)}
      '';
    };
  # Optional arguments:
  #  - theme   = "Your multiline string logo";
  #  - aliases = [ "fastfetch" ];
in pkgs.lib.makeOverridable fastFetchFinal {
  aliases = [ "fastfetch" ];
  theme = logos.ibm-large;
}
